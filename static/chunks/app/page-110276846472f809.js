(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2272:function(e,s,a){Promise.resolve().then(a.bind(a,6662))},6662:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Home}});var r,l,n=a(7437),t=a(2265);(r=l||(l={})).DRIVING="driving",r.BIKING="biking",r.WALKING="walking",r.TRANSIT="transit";var address_form=e=>{let[s,a]=(0,t.useState)(!1),[r,i]=(0,t.useState)(l.DRIVING);return(0,n.jsx)("form",{className:"mb-3",onSubmit:s=>e.handleSubmit(s),children:(0,n.jsxs)("div",{className:"d-flex flex-row",children:[(0,n.jsxs)("div",{className:"flex-column flex-fill mr-4",children:[(0,n.jsx)("label",{htmlFor:"address1",children:"First address"}),(0,n.jsx)("input",{type:"text",className:"form-control",id:"address1","aria-describedby":"address1Input",placeholder:"Enter address here",required:!0})]}),(0,n.jsxs)("div",{className:"flex-column flex-fill mr-4",children:[(0,n.jsx)("label",{htmlFor:"address2",children:"Second address"}),(0,n.jsx)("input",{type:"text",className:"form-control",id:"address2","aria-describedby":"address2Input",placeholder:"Enter address here",required:!0})]}),(0,n.jsxs)("div",{className:"flex-column flex-fill mr-4",children:[(0,n.jsx)("label",{htmlFor:"mode",children:"Mode"}),(0,n.jsx)("div",{className:"form-control mb-0 w-100",onClick:()=>{a(!s)},children:(0,n.jsxs)("select",{id:"transportation",name:"transportation",value:r,onChange:e=>{i(e.target.value)},className:"w-100",children:[(0,n.jsx)("option",{value:l.DRIVING,children:"Driving"}),(0,n.jsx)("option",{value:l.WALKING,children:"Walking"}),(0,n.jsx)("option",{value:l.BIKING,children:"Biking"}),(0,n.jsx)("option",{value:l.TRANSIT,children:"Public Transit"})]})})]}),(0,n.jsx)("div",{className:"flex-column align-self-end",children:(0,n.jsx)("input",{type:"submit",className:"btn btn-primary mb-0 submit-button",value:"Submit"})})]})})},i=a(9222),d=a(9359),o=a(649),map_display=e=>{let{address1Information:s,address2Information:a,parksInformation:r}=e,l=[s,a,...r],i="AIzaSyCaNEF7UUxR5E6B_Fs6fGlYcm-6qOAx8pE",d={lat:r[0].location.lat,lng:r[0].location.lng},[c,m]=(0,t.useState)(-1);var h=[],u=[];for(let e=0;e<r.length+2;e++)[h[e],u[e]]=(0,o.Rt)();var p=new google.maps.LatLngBounds(new google.maps.LatLng(Math.min(...l.map(e=>e.location.lat)),Math.min(...l.map(e=>e.location.lng))),new google.maps.LatLng(Math.max(...l.map(e=>e.location.lat)),Math.max(...l.map(e=>e.location.lng))));let toggleInfoWindow=e=>{m(e)};function markerWithWindow(e,s,a){var r;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o._Q,{zIndex:s+1,position:e.location,onClick:()=>toggleInfoWindow(s),ref:h[s],children:a?(0,n.jsx)(o.lO,{background:"var(--highlight)",glyphColor:"#000",borderColor:"#000"}):(0,n.jsx)(o.lO,{background:"var(--midlight)",glyphColor:"#000",borderColor:"#000"})}),c==s&&(0,n.jsxs)(o.nx,{anchor:u[s],onCloseClick:()=>toggleInfoWindow(-1),children:[(0,n.jsx)("b",{children:(0,n.jsx)("h5",{children:e.name})}),(0,n.jsx)("p",{children:e.address}),(0,n.jsx)("a",{className:"google-maps-link",target:"_blank",href:"https://www.google.com/maps/search/?api=1&query=".concat(null!==(r=e.name)&&void 0!==r?r:e.address,"&query_place_id=").concat(e.id),children:"View on Google Maps"})]}),";"]})}var x=r.map((e,s)=>markerWithWindow(e,s,!0)),g=[s,a].map((e,s)=>markerWithWindow(e,s+r.length,!1)),f=r.map((e,s)=>(0,n.jsxs)("div",{className:"park-item inline-flex",id:c==s?"park-item-selected":"",onClick:()=>toggleInfoWindow(s),children:[(0,n.jsx)("div",{className:"mr-3",children:(0,n.jsx)("h4",{children:(s+1).toString()+"."})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:e.name}),(0,n.jsx)("p",{children:e.address})]})]},s)),j=(0,n.jsxs)("div",{className:"inline-flex w-100 h-100",children:[(0,n.jsx)("div",{className:"w-50 h-100",children:(0,n.jsx)(o.un,{apiKey:i,children:(0,n.jsxs)(o.D5,{center:d,initialBounds:p,disableDefaultUI:!1,mapId:"1",children:[x,g]})})}),(0,n.jsx)("div",{className:"w-50 h-100 overflow-scroll",children:(0,n.jsxs)("div",{className:"location-details",children:[(0,n.jsx)("h3",{className:"park-item-title",children:"Parks:"}),(0,n.jsx)("div",{className:"park-list",children:f})]})})]}),v=(0,n.jsx)("div",{className:"p-2",children:(0,n.jsx)("p",{children:"Could not connect to Google Maps."})});return(0,n.jsx)("div",{className:"w-100 maps-wrapper",children:i?j:v})},location_display=e=>{var s;let{address1:a,address2:r,transportation:l}=e,[o,c]=(0,t.useState)([]),[m,h]=(0,t.useState)(null),[u,p]=(0,t.useState)(null),[x,g]=(0,t.useState)(""),[f,j]=(0,t.useState)(!1);function loaderDisplay(e){return(0,n.jsx)("div",{className:"w-100 h-50 p-4",children:(0,n.jsx)("h3",{children:e})})}return(0,t.useEffect)(()=>{j(!0),i.Z.get("http://127.0.0.1:5000/parks",{params:{address1:a,address2:r,transportation:l}}).then(e=>{if(200==e.status){let s=e.data.results;s.parks.length>0?(g(""),h(s.address1),p(s.address2),c(s.parks)):g("No parks found."),j(!1)}else console.log(e.data),g("An error occurred."),j(!1)}).catch(e=>{console.log(e.response),"address_not_found"==e.response.data.status_code?g("Error: One or more addresses could not be found."):"directions_not_found"==e.response.data.status_code?g("Error: Could not find path between two addresses."):g("An error occurred."),j(!1)}),console.log("fetched")},[a,r,l]),x?s=loaderDisplay(x):o&&m&&u&&(s=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.Wrapper,{apiKey:"AIzaSyCaNEF7UUxR5E6B_Fs6fGlYcm-6qOAx8pE",children:(0,n.jsx)(map_display,{address1Information:m,address2Information:u,parksInformation:o})})})),(0,n.jsx)("div",{className:"information mb-3 h-100",children:(0,n.jsx)(n.Fragment,{children:f?loaderDisplay("Loading..."):s})})};function Home(){let[e,s]=(0,t.useState)(""),[a,r]=(0,t.useState)(""),[i,d]=(0,t.useState)(l.DRIVING);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"pb-4",children:(0,n.jsx)("p",{children:"Tell us two addresses and we'll return the closest parks in between them."})}),(0,n.jsx)(address_form,{handleSubmit:e=>{e.preventDefault();let a=e.currentTarget.elements;s(a.address1.value),r(a.address2.value),d(a.transportation.value)}}),e&&a&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(location_display,{address1:e,address2:a,transportation:i})})]})}}},function(e){e.O(0,[528,971,472,744],function(){return e(e.s=2272)}),_N_E=e.O()}]);